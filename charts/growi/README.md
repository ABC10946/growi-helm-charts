# GROWI Helm Chart

## TL;DR;
```bash
$ helm repo add weseek https://weseek.github.io/helm-charts/
$ helm install growi-example weseek/growi
```

## Prerequisites
* Helm 2 or 3
   * Tested with 2.16.1 and 3.0.2.
* Supported version of Kubernetes
   * Tested with 1.16.4 and 1.17.0.
   * See [official document](https://github.com/kubernetes/sig-release/blob/master/releases/patch-releases.md) for current versions. The chart may work on older versions, but it is discouraged.

## Parameters

| Parameter        | Description                                                                                                                                                                                                                 | Default                                                                                              |
| ---------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------- |
| `replicaCount`     | Number of GROWI pods to run.                                                                                                                                                                                                | `1`                                                                                                  |
| `image.repository` | GROWI Docker image name.                                                                                                                                                                                                    | `weseek/growi`                                                                                       |
| `image.tag`        | GROWI Docker image tag.                                                                                                                                                                                                     | `3.6.2`                                                                                              |
| `image.pullPolicy` |                                                                                                                                                                                                                             | `IfNotPresent`                                                                                       |
| `service.type`     | Kubernetes service type.                                                                                                                                                                                                    | `ClusterIP`                                                                                          |
| `service.port`     | Kubernetes service port.                                                                                                                                                                                                    | `80`                                                                                                 |
| `ingress`          | Configure [ingress](https://kubernetes.io/docs/concepts/services-networking/ingress/) to expose the GROWI service. See [`values.yaml`](./values.yaml) for an example                                                        | `enabled: false`                                                                                     |
| `fileUpload.type`  | See [Admin Guide](https://docs.growi.org/en/admin-guide/admin-cookbook/attachment.html#file-upload-destination) for available options.                                                                                      | `local`                                                                                              |
| `fileUpload.local` | Additional configurations for persistent volume. Only used if `fileUpload.type` is set to `local`. It is recommended to use non-`local` storages or `local` with ReadWriteMany mode for production environment for scaling. | `annotations: {}`<br> `accessModes: [ "ReadWriteOnce" ]`<br> `size: 5Gi`<br> `storageClass: default` |
| `passwordSeed`   | Password seed for GROWI. It is highly recommended to set this value for production environment.                                                                                                                             | `""` (Randomly generated)                                                                            |
| `extraEnv`         | Additional environmentvariables for GROWI. See [Admin Guide](https://docs.growi.org/en/admin-guide/admin-cookbook/env-vars.html) for available options.                                                                     | `{}`                                                                                                 |
| `strategy`         | Update strategy of GROWI pod. It is highly recommended to set this value for production environment.                                                                                                                        | `{}`                                                                                                 |
| `resources`        | Pod resources.                                                                                                                                                                                                              | `{}`                                                                                                 |
| `podAnnotations`   | Additional pod annotations.                                                                                                                                                                                                 | `{}`                                                                                                 |
| `podLabels`        | Additional pod labels.                                                                                                                                                                                                      | `{}`                                                                                                 |
| `nodeSelector`     | Node labels for pod scheduling.                                                                                                                                                                                             | `{}`                                                                                                 |
| `tolerations`      | Node taints to tolerate for pod scheduling.                                                                                                                                                                                 | `{}`                                                                                                 |
| `affinity`         | Pods affinity.                                                                                                                                                                                                              | `{}`                                                                                                 |
| `mongodb`          | Parameters for MongoDB subchart. See [Helm Hub](https://hub.helm.sh/charts/stable/mongodb) for details.                                                                                                                     | `image.tag: 3.6.16-r20`<br> `usePassword: false`                                                     |
| `elasticsearch`    | Parameters for Elasticsearch subchart. See [Helm Hub](https://hub.helm.sh/charts/elastic/elasticsearch) for details.                                                                                                        | `image: extendwings/growi-elasticsearch`<br> `imageTag: latest`<br> `esMajorVersion: 6`              |
| `nameOverride`     | String to partially override growi.fullname template with a string (will prepend the release name)                                                                                                                          | `""`                                                                                                 |
| `fullnameOverride` | String to fully override growi.fullname template with a string                                                                                                                                                              | `""`                                                                                                 |
